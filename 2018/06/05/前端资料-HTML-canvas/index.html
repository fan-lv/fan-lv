<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="canvas"><meta name="keywords" content="HTML5,JavaScript"><meta name="author" content="吕钒,15757856604@163.com"><meta name="copyright" content="lvfan"><title>canvas【吕钒的后花园】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});</script><script>var isPassword=!1;isPassword&&""!==prompt("请输入文章密码")&&(alert("密码错误！"),history.back())</script><script>window.GLOBAL_CONFIG={root:"/",algolia:{appId:"DDS7QLTFBR",apiKey:"4e05b9f66dc7fb2160aef36bd87ecc5a",indexName:"lvfan",hits:{per_page:10},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容:${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},gitment:{owner:"fan-lv",repo:"fan-lv.github.io",client_id:"09328cbecf9126bb0b49",client_secret:"ea229bdebbb9208f368808dc14e93dc38cc3276a"},valine:{},twikoo:{}}</script><meta name="generator" content="Hexo 6.0.0"></head><body><canvas id="universe"></canvas><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#canvas-%E5%AE%BD%E9%AB%98%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">canvas 宽高设置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A2%9C%E8%89%B2%E3%80%81%E6%A0%B7%E5%BC%8F%E5%92%8C%E9%98%B4%E5%BD%B1"><span class="toc-number">2.</span> <span class="toc-text">颜色、样式和阴影</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%BF%E6%9D%A1%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">线条样式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9F%A9%E5%BD%A2"><span class="toc-number">4.</span> <span class="toc-text">矩形</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84"><span class="toc-number">5.</span> <span class="toc-text">路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2"><span class="toc-number">6.</span> <span class="toc-text">转换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E6%9C%AC"><span class="toc-number">7.</span> <span class="toc-text">文本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E7%BB%98%E5%88%B6"><span class="toc-number">8.</span> <span class="toc-text">图像绘制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%83%8F%E7%B4%A0%E6%93%8D%E4%BD%9C"><span class="toc-number">9.</span> <span class="toc-text">像素操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%88%E6%88%90"><span class="toc-number">10.</span> <span class="toc-text">合成</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">11.</span> <span class="toc-text">其他</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%98%E5%9B%BE%E6%AD%A5%E9%AA%A4"><span class="toc-number">12.</span> <span class="toc-text">绘图步骤</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-number"></span> <span class="toc-text">渲染上下文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2"><span class="toc-number"></span> <span class="toc-text">绘制矩形</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E8%B7%AF%E5%BE%84"><span class="toc-number"></span> <span class="toc-text">绘制路径</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E8%B7%AF%E5%BE%84%E7%94%BB%E4%B8%80%E4%B8%AA%E4%B8%89%E8%A7%92%E5%BD%A2"><span class="toc-number"></span> <span class="toc-text">用路径画一个三角形</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E5%9C%86%E5%BC%A7"><span class="toc-number"></span> <span class="toc-text">绘制圆弧</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF"><span class="toc-number"></span> <span class="toc-text">绘制贝塞尔曲线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E5%9E%8B%E6%A0%B7%E5%BC%8F%EF%BC%88Line-Styles%EF%BC%89"><span class="toc-number"></span> <span class="toc-text">线型样式（Line Styles）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E7%BA%BF"><span class="toc-number"></span> <span class="toc-text">虚线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%90%E5%8F%98"><span class="toc-number"></span> <span class="toc-text">渐变</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7%E6%B8%90%E5%8F%98"><span class="toc-number"></span> <span class="toc-text">线性渐变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%84%E5%90%91%E6%B8%90%E5%8F%98"><span class="toc-number"></span> <span class="toc-text">径向渐变</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Patterns-%E5%9B%BE%E6%A1%88%E6%A0%B7%E5%BC%8F"><span class="toc-number"></span> <span class="toc-text">Patterns 图案样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B4%E5%BD%B1-Shadows"><span class="toc-number"></span> <span class="toc-text">阴影 Shadows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E5%AD%97"><span class="toc-number"></span> <span class="toc-text">文字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F"><span class="toc-number"></span> <span class="toc-text">图像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#save-%E5%92%8C-restore"><span class="toc-number"></span> <span class="toc-text">save 和 restore</span></a></li></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">吕钒</div><div class="author-info-description">心之所向 素履以往 生如逆旅 一苇以航</div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/fan-lv" target="_blank">GitHub<i class="icon-dot bg-color8"></i></a><a class="links-button button-hover" href="mailto:15757856604@163.com" target="_blank">E-Mail<i class="icon-dot bg-color4"></i></a><a class="links-button button-hover" href="tencent://message/?uin=1019593584&amp;Site=&amp;Menu=yes" target="_blank">QQ<i class="icon-dot bg-color10"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">56</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">31</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">19</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i> <span>搜索</span></a><a class="title-name" href="/">吕钒的后花园</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">canvas</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2018-06-05 | 更新于 2021-05-19</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99/">前端资料</a><i class="fa fa-angle-right" style="margin:0 8px"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99/HTML/">HTML</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/HTML5/">HTML5</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/JavaScript/">JavaScript</a></div></div></div><div class="main-content"><h5 id="canvas-宽高设置"><a href="#canvas-宽高设置" class="headerlink" title="canvas 宽高设置"></a>canvas 宽高设置</h5><p>canvas 的宽高需要写在 html 上，如下代码:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><em>如果你用 CSS 设置的话它会变成拉伸，变得比较模糊。</em></p></blockquote><h5 id="颜色、样式和阴影"><a href="#颜色、样式和阴影" class="headerlink" title="颜色、样式和阴影"></a>颜色、样式和阴影</h5><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>fillStyle</td><td>设置或返回用于填充绘画的颜色、渐变或模式。</td></tr><tr><td>strokeStyle</td><td>设置或返回用于笔触的颜色、渐变或模式。</td></tr><tr><td>shadowColor</td><td>设置或返回用于阴影的颜色。</td></tr><tr><td>shadowBlur</td><td>设置或返回用于阴影的模糊级别。</td></tr><tr><td>shadowOffsetX</td><td>设置或返回阴影与形状的水平距离。</td></tr><tr><td>shadowOffsetY</td><td>设置或返回阴影与形状的垂直距离。</td></tr></tbody></table><span id="more"></span><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>createLinearGradient()</td><td>创建线性渐变（用在画布内容上）。</td></tr><tr><td>createPattern()</td><td>在指定的方向上重复指定的元素。</td></tr><tr><td>createRadialGradient()</td><td>创建放射状/环形的渐变（用在画布内容上）。</td></tr><tr><td>addColorStop()</td><td>规定渐变对象中的颜色和停止位置。</td></tr></tbody></table><h5 id="线条样式"><a href="#线条样式" class="headerlink" title="线条样式"></a>线条样式</h5><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>lineCap</td><td>设置或返回线条的结束端点样式。</td></tr><tr><td>lineJoin</td><td>设置或返回两条线相交时，所创建的拐角类型。</td></tr><tr><td>lineWidth</td><td>设置或返回当前的线条宽度。</td></tr><tr><td>miterLimit</td><td>设置或返回最大斜接长度。</td></tr></tbody></table><h5 id="矩形"><a href="#矩形" class="headerlink" title="矩形"></a>矩形</h5><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>rect()</td><td>创建矩形。</td></tr><tr><td>fillRect()</td><td>绘制”被填充”的矩形。</td></tr><tr><td>strokeRect()</td><td>绘制矩形（无填充）。</td></tr><tr><td>clearRect()</td><td>在给定的矩形内清除指定的像素。</td></tr></tbody></table><h5 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h5><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>fill()</td><td>填充当前绘图（路径）。</td></tr><tr><td>stroke()</td><td>绘制已定义的路径。</td></tr><tr><td>beginPath()</td><td>起始一条路径，或重置当前路径。</td></tr><tr><td>moveTo()</td><td>把路径移动到画布中的指定点，不创建线条。</td></tr><tr><td>closePath()</td><td>创建从当前点回到起始点的路径。</td></tr><tr><td>lineTo()</td><td>添加一个新点，然后在画布中创建从该点到最后指定点的线条。</td></tr><tr><td>clip()</td><td>从原始画布剪切任意形状和尺寸的区域。</td></tr><tr><td>quadraticCurveTo()</td><td>创建二次贝塞尔曲线。</td></tr><tr><td>bezierCurveTo()</td><td>创建三次贝塞尔曲线。</td></tr><tr><td>arc()</td><td>创建弧/曲线（用于创建圆形或部分圆）。</td></tr><tr><td>arcTo()</td><td>创建两切线之间的弧/曲线。</td></tr><tr><td>isPointInPath()</td><td>如果指定的点位于当前路径中，则返回 true，否则返回 false。</td></tr></tbody></table><h5 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h5><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>scale()</td><td>缩放当前绘图至更大或更小。</td></tr><tr><td>rotate()</td><td>旋转当前绘图。</td></tr><tr><td>translate()</td><td>重新映射画布上的 (0,0) 位置。</td></tr><tr><td>transform()</td><td>替换绘图的当前转换矩阵。</td></tr><tr><td>setTransform()</td><td>将当前转换重置为单位矩阵。然后运行 transform()。</td></tr></tbody></table><h5 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h5><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>font</td><td>设置或返回文本内容的当前字体属性。</td></tr><tr><td>textAlign</td><td>设置或返回文本内容的当前对齐方式。</td></tr><tr><td>textBaseline</td><td>设置或返回在绘制文本时使用的当前文本基线。</td></tr></tbody></table><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>fillText()</td><td>在画布上绘制”被填充的”文本。</td></tr><tr><td>strokeText()</td><td>在画布上绘制文本（无填充）。</td></tr><tr><td>measureText()</td><td>返回包含指定文本宽度的对象。</td></tr></tbody></table><h5 id="图像绘制"><a href="#图像绘制" class="headerlink" title="图像绘制"></a>图像绘制</h5><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>drawImage()</td><td>向画布上绘制图像、画布或视频。</td></tr></tbody></table><h5 id="像素操作"><a href="#像素操作" class="headerlink" title="像素操作"></a>像素操作</h5><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>width</td><td>返回 ImageData 对象的宽度。</td></tr><tr><td>height</td><td>返回 ImageData 对象的高度。</td></tr><tr><td>data</td><td>返回一个对象，其包含指定的 ImageData 对象的图像数据。</td></tr></tbody></table><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>createImageData()</td><td>创建新的、空白的 ImageData 对象。</td></tr><tr><td>getImageData()</td><td>返回 ImageData 对象，该对象为画布上指定的矩形复制像素数据。</td></tr><tr><td>putImageData()</td><td>把图像数据（从指定的 ImageData 对象）放回画布上。</td></tr></tbody></table><h5 id="合成"><a href="#合成" class="headerlink" title="合成"></a>合成</h5><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>globalAlpha</td><td>设置或返回绘图的当前 alpha 或透明值。</td></tr><tr><td>globalCompositeOperation</td><td>设置或返回新图像如何绘制到已有的图像上。</td></tr></tbody></table><h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>save()</td><td>保存当前环境的状态。</td></tr><tr><td>restore()</td><td>返回之前保存过的路径状态和属性。</td></tr><tr><td>createEvent()</td><td></td></tr><tr><td>getContext()</td><td></td></tr><tr><td>toDataURL()</td><td></td></tr></tbody></table><h5 id="绘图步骤"><a href="#绘图步骤" class="headerlink" title="绘图步骤"></a>绘图步骤</h5><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/canvas.png" title="canvas流程"><h2 id="渲染上下文"><a href="#渲染上下文" class="headerlink" title="渲染上下文"></a>渲染上下文</h2><p>获取一个2D渲染上下文</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="绘制矩形"><a href="#绘制矩形" class="headerlink" title="绘制矩形"></a>绘制矩形</h2><p>填充一个颜色为 rgba(200,0,0,0.5) ，(x,y)坐标为(10,10)， 宽度为55，高度为50的矩形。<br>描边一个颜色为 rgba(0,0,250,0.5) ，(x,y)坐标为(100,100)， 宽度为50，高度为55的矩形。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ctx</span>.fillStyle=&#x27;rgba(<span class="number">200</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>.<span class="number">5</span>)&#x27;;</span><br><span class="line"><span class="attribute">ctx</span>.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">55</span>,<span class="number">50</span>);</span><br><span class="line"><span class="attribute">ctx</span>.strokeStyle=&#x27;rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">250</span>,<span class="number">0</span>.<span class="number">5</span>)&#x27;;</span><br><span class="line"><span class="attribute">ctx</span>.strokeRect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="number">55</span>);</span><br></pre></td></tr></table></figure><p>清除指定矩形区域(x,y坐标为0,0，宽度高度为500)，让清除部分完全透明</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">500</span>,<span class="number">500</span>);</span><br></pre></td></tr></table></figure><h2 id="绘制路径"><a href="#绘制路径" class="headerlink" title="绘制路径"></a>绘制路径</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新建一条路径，生成之后，图形绘制命令被指向到路径上生成路径。</span></span><br><span class="line"><span class="function"><span class="title">beginPath</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">// 闭合路径之后图形绘制命令又重新指向到上下文中。</span></span><br><span class="line"><span class="function"><span class="title">closePath</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">// 通过线条来绘制图形轮廓。</span></span><br><span class="line"><span class="function"><span class="title">stroke</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">// 通过填充路径的内容区域生成实心的图形</span></span><br><span class="line"><span class="function"><span class="title">fill</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><h3 id="用路径画一个三角形"><a href="#用路径画一个三角形" class="headerlink" title="用路径画一个三角形"></a>用路径画一个三角形</h3><p>把画笔移动到(75,50)位置，之后开始画一条直线到(100,75)，继续画直线到(100,25)，最后填充这个路径。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ctx</span>.beginPath();</span><br><span class="line"><span class="attribute">ctx</span>.moveTo(<span class="number">75</span>,<span class="number">50</span>);</span><br><span class="line"><span class="attribute">ctx</span>.lineTo(<span class="number">100</span>,<span class="number">75</span>);</span><br><span class="line"><span class="attribute">ctx</span>.lineTo(<span class="number">100</span>,<span class="number">25</span>);</span><br><span class="line"><span class="attribute">ctx</span>.fill();</span><br></pre></td></tr></table></figure><h2 id="绘制圆弧"><a href="#绘制圆弧" class="headerlink" title="绘制圆弧"></a>绘制圆弧</h2><p>以(300,300)位置为圆心，逆时针绘制一个半径为80的圆<br>最后一个参数为 boolean 类型，true表示逆时针，false（默认值）表示顺时针</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">arc</span>(<span class="number">300</span>,<span class="number">300</span>,<span class="number">80</span>,<span class="number">0</span>,Math.PI*<span class="number">2</span>,true)</span><br></pre></td></tr></table></figure><h2 id="绘制贝塞尔曲线"><a href="#绘制贝塞尔曲线" class="headerlink" title="绘制贝塞尔曲线"></a>绘制贝塞尔曲线</h2><p><img src="https://mdn.mozillademos.org/files/223/Canvas_curves.png" alt="Canvas_curves"><br>(cp1x, cp1y)左边红色点的坐标，(cp2x, cp2y)右边红色点的坐标，(x, y)结束点的坐标</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bezier<span class="constructor">CurveTo(<span class="params">cp1x</span>, <span class="params">cp1y</span>, <span class="params">cp2x</span>, <span class="params">cp2y</span>, <span class="params">x</span>, <span class="params">y</span>)</span></span><br></pre></td></tr></table></figure><h2 id="线型样式（Line-Styles）"><a href="#线型样式（Line-Styles）" class="headerlink" title="线型样式（Line Styles）"></a>线型样式（Line Styles）</h2><ul><li>lineWidth： 线条宽度，默认值（1.0）。</li><li>lineCap： 线段端点显示的样子。<br>有三个值：<br>butt（默认值）<br>round：端点加上半径为一半线宽的半圆<br>square：断电加上等宽且高度为一半宽的方块<br><img src="https://mdn.mozillademos.org/files/236/Canvas_linecap.png" alt="lineCap"></li><li>lineJoin： 两条线段连接处所显示的样子。<br>有三个值<br>round： 边角被磨圆<br>bevel<br>miter（默认值）<br><img src="https://developer.mozilla.org/@api/deki/files/89/=Canvas_linejoin.png" alt="lineJoin"></li></ul><h2 id="虚线"><a href="#虚线" class="headerlink" title="虚线"></a>虚线</h2><p>每段虚线的长度为10，虚线间隙为2，起始偏移为5</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setLineDash</span><span class="params">([<span class="number">10</span>, <span class="number">2</span>])</span></span></span><br><span class="line">ctx<span class="selector-class">.lineDashOffset</span> = <span class="number">5</span></span><br></pre></td></tr></table></figure><p>绘制一个运动的虚线框</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var ctx = document.get<span class="constructor">ElementById(&#x27;<span class="params">canvas</span>&#x27;)</span>.get<span class="constructor">Context(&#x27;2d&#x27;)</span>;</span><br><span class="line"><span class="comment">// 画背景</span></span><br><span class="line"><span class="keyword">let</span> offset = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">function</span> draw<span class="literal">()</span> &#123;</span><br><span class="line">    ctx.clear<span class="constructor">Rect(0, 0, 200, 200)</span>;</span><br><span class="line">    ctx.set<span class="constructor">LineDash([10, 2])</span>;</span><br><span class="line">    ctx.lineDashOffset = offset;</span><br><span class="line">    ctx.stroke<span class="constructor">Rect(10, 10, 100, 100)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> march<span class="literal">()</span> &#123;</span><br><span class="line">    offset++;</span><br><span class="line">    <span class="keyword">if</span> (offset &gt; <span class="number">10</span>) &#123;</span><br><span class="line">        offset = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    draw<span class="literal">()</span>;</span><br><span class="line">    set<span class="constructor">Timeout(<span class="params">march</span>, 50)</span>;</span><br><span class="line">&#125;</span><br><span class="line">march<span class="literal">()</span>;</span><br></pre></td></tr></table></figure><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/dotted.gif" title="dotted"><h2 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h2><h3 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h3><p>创建一个从（10，10）到（200，200）方向到渐变，颜色为0%处#fff，100%处#f00，并且填充一个（20，20），宽高为100的矩形。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">let</span> ctx = document.getElementById(&#x27;canvas&#x27;).getContext(&#x27;<span class="number">2</span>d&#x27;);</span><br><span class="line"><span class="attribute">let</span> lineardradient = ctx.createLinearGradient(<span class="number">10</span>, <span class="number">10</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line"><span class="attribute">lineardradient</span>.addColorStop(<span class="number">0</span>,&#x27;#fff&#x27;);</span><br><span class="line"><span class="attribute">lineardradient</span>.addColorStop(<span class="number">1</span>,&#x27;#f00&#x27;);</span><br><span class="line"><span class="attribute">ctx</span>.fillStyle = lineardradient;</span><br><span class="line"><span class="attribute">ctx</span>.fillRect(<span class="number">20</span>,<span class="number">20</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br></pre></td></tr></table></figure><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/linearGradient.png" title="linearGradient"><h3 id="径向渐变"><a href="#径向渐变" class="headerlink" title="径向渐变"></a>径向渐变</h3><p>createRadialGradient的参数，（45，45，10）表示45，45位置，半径为10的圆1，（100，100，30）表示圆2</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">let</span> ctx = document.getElementById(&#x27;canvas&#x27;).getContext(&#x27;<span class="number">2</span>d&#x27;);</span><br><span class="line"><span class="attribute">let</span> radialGradient = ctx.createRadialGradient(<span class="number">45</span>, <span class="number">45</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">30</span>);</span><br><span class="line"><span class="attribute">radialGradient</span>.addColorStop(<span class="number">0</span>, &#x27;#f00&#x27;);</span><br><span class="line"><span class="attribute">radialGradient</span>.addColorStop(<span class="number">0</span>.<span class="number">8</span>, &#x27;#<span class="number">0</span>f0&#x27;);</span><br><span class="line"><span class="attribute">radialGradient</span>.addColorStop(<span class="number">1</span>, &#x27;#<span class="number">00</span>f&#x27;);</span><br><span class="line"><span class="attribute">ctx</span>.fillStyle = radialGradient;</span><br><span class="line"><span class="attribute">ctx</span>.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">150</span>);</span><br></pre></td></tr></table></figure><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/canvasRadialGradient.png" title="canvasRadialGradient"><h2 id="Patterns-图案样式"><a href="#Patterns-图案样式" class="headerlink" title="Patterns 图案样式"></a>Patterns 图案样式</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ctx = document.get<span class="constructor">ElementById(&#x27;<span class="params">canvas</span>&#x27;)</span>.get<span class="constructor">Context(&#x27;2d&#x27;)</span>;</span><br><span class="line"><span class="keyword">let</span> img = <span class="keyword">new</span> <span class="constructor">Image()</span>;</span><br><span class="line">img.src = <span class="string">&quot;http://***/b.jpg&quot;</span>;</span><br><span class="line">img.onload =<span class="function"> <span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> ptrn = ctx.create<span class="constructor">Pattern(<span class="params">img</span>, &#x27;<span class="params">no</span>-<span class="params">repeat</span>&#x27;)</span>;</span><br><span class="line">    ctx.fillStyle = ptrn;</span><br><span class="line">    ctx.fill<span class="constructor">Rect(0, 0, 500, 500)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="阴影-Shadows"><a href="#阴影-Shadows" class="headerlink" title="阴影 Shadows"></a>阴影 Shadows</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ctx</span>.fillStyle = &#x27;#f00&#x27;;</span><br><span class="line"><span class="attribute">ctx</span>.shadowBlur = <span class="number">4</span>;</span><br><span class="line"><span class="attribute">ctx</span>.shadowColor = &#x27;#<span class="number">000</span>&#x27;;</span><br><span class="line"><span class="attribute">ctx</span>.shadowOffsetX = <span class="number">10</span>;</span><br><span class="line"><span class="attribute">ctx</span>.shadowOffsetY = <span class="number">10</span>;</span><br><span class="line"><span class="attribute">ctx</span>.fillRect(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br></pre></td></tr></table></figure><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/canvasShadow.png" title="canvasShadow"><h2 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h2><p>fillText/strokeText 最后一个参数为可选参数（显示文本的宽度，如果文本大于设置的宽度，文本会变形压缩）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ctx = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas&#x27;</span>).<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">ctx.<span class="property">font</span> = <span class="string">&quot;24px serif&quot;</span>;</span><br><span class="line">ctx.<span class="title function_">fillText</span>(<span class="string">&#x27;Hello World!Hello JavaScript!Hello Canvas!&#x27;</span>, <span class="number">300</span>, <span class="number">200</span>);</span><br><span class="line">ctx.<span class="property">textAlign</span> = <span class="string">&#x27;center&#x27;</span>;</span><br><span class="line">ctx.<span class="title function_">strokeText</span>(<span class="string">&#x27;Hello World!Hello JavaScript!Hello Canvas!&#x27;</span>, <span class="number">300</span>, <span class="number">220</span>);</span><br></pre></td></tr></table></figure><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/canvasText.png" title="canvasText"><h2 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h2><p>第一个参数是图片，x,y为图片左上角的定位，width，height为图片的宽高（缩放图片）</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">draw<span class="constructor">Image(<span class="params">image</span>, <span class="params">x</span>, <span class="params">y</span>, <span class="params">width</span>, <span class="params">height</span>)</span></span><br></pre></td></tr></table></figure><p>如果有9个参数，则可以裁切图片，如下图</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">draw<span class="constructor">Image(<span class="params">image</span>, <span class="params">sx</span>, <span class="params">sy</span>, <span class="params">sWidth</span>, <span class="params">sHeight</span>, <span class="params">dx</span>, <span class="params">dy</span>, <span class="params">dWidth</span>, <span class="params">dHeight</span>)</span></span><br></pre></td></tr></table></figure><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/Canvas_drawimage.jpg" title="Canvas_drawimage"><h2 id="save-和-restore"><a href="#save-和-restore" class="headerlink" title="save 和 restore"></a>save 和 restore</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let ctx = document.getElementById(<span class="string">&#x27;canvas&#x27;</span>).getContext(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">150</span>,<span class="number">150</span>);   <span class="regexp">//</span> 使用默认设置绘制一个矩形</span><br><span class="line">ctx.save();                  <span class="regexp">//</span> 保存默认状态</span><br><span class="line"></span><br><span class="line">ctx.fillStyle = <span class="string">&#x27;#09F&#x27;</span>       <span class="regexp">//</span> 在原有配置基础上对颜色做改变</span><br><span class="line">ctx.fillRect(<span class="number">15</span>,<span class="number">15</span>,<span class="number">120</span>,<span class="number">120</span>); <span class="regexp">//</span> 使用新的设置绘制一个矩形</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ctx.save();                  <span class="regexp">//</span> 保存当前状态</span><br><span class="line">ctx.fillStyle = <span class="string">&#x27;#FFF&#x27;</span>       <span class="regexp">//</span> 再次改变颜色配置</span><br><span class="line">ctx.globalAlpha = <span class="number">0.5</span>;</span><br><span class="line">ctx.fillRect(<span class="number">30</span>,<span class="number">30</span>,<span class="number">90</span>,<span class="number">90</span>);   <span class="regexp">//</span> 使用新的配置绘制一个矩形</span><br><span class="line"></span><br><span class="line">ctx.restore();               <span class="regexp">//</span> 重新加载之前的颜色状态</span><br><span class="line">ctx.fillRect(<span class="number">45</span>,<span class="number">45</span>,<span class="number">60</span>,<span class="number">60</span>);   <span class="regexp">//</span> 使用上一次的配置绘制一个矩形</span><br><span class="line"></span><br><span class="line">ctx.restore();               <span class="regexp">//</span> 加载默认颜色配置</span><br><span class="line">ctx.fillRect(<span class="number">60</span>,<span class="number">60</span>,<span class="number">30</span>,<span class="number">30</span>);   <span class="regexp">//</span> 使用加载的配置绘制一个矩形</span><br></pre></td></tr></table></figure><img src="/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/canvas_save_restore.png" title="canvas_save_restore"></div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者:</span> <span class="post-copyright-info"><a href="mailto:15757856604@163.com">吕钒</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接:</span> <span class="post-copyright-info"><a href="https://fan-lv.github.io/2018/06/05/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-HTML-canvas/">https://fan-lv.github.io/2018/06/05/前端资料-HTML-canvas/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本站点所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://fan-lv.github.io">吕钒的后花园</a>！</span></div></div><div class="post-copyright" id="comments-container"><script src="/js/comments/gitment.js"></script></div><script>let arr = location.href.split('/#more')[0].split('/');
let title = arr[arr.length - 1];
if (title === '') {
    title = arr[arr.length - 2]
}
var flag = false;
var gitFun = function () {
    try {
        var gitmentObj = window.GLOBAL_CONFIG.gitment;
        var gitment = new Gitment({
            id: decodeURI(title), // 可选。默认为 location.href
            owner: gitmentObj.owner,
            repo: gitmentObj.repo,
            oauth: {
                client_id: gitmentObj.client_id,
                client_secret: gitmentObj.client_secret
            },
        });
        gitment.render('comments-container');
        flag = true;
    } catch (e) {
        flag = false;
    }
}
var setIn = setInterval(() => {
    if (!flag) {
        gitFun();
    } else {
        clearInterval(setIn);
    }
}, 200);</script></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2018/06/11/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-JavaScript-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><i class="fas fa-angle-left">&nbsp;</i><span>正则表达式</span></a></div></div></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2024 By 吕钒</div></div></div></footer></div><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><script src="/js/thirdparty/velocity.min.js"></script><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><script src="/js/fan.js"></script><script src="/js/canvas_bg.js"></script><script src="/js/utils.js"></script><script src="/js/scroll.js"></script><script src="/js/sidebar.js"></script><script src="/js/copy.js"></script><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><div id="search-box"></div><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>