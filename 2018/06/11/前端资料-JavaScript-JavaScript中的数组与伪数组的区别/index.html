<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="JavaScript中的数组与伪数组的区别"><meta name="keywords" content="JavaScript"><meta name="author" content="吕钒,15757856604@163.com"><meta name="copyright" content="lvfan"><title>JavaScript中的数组与伪数组的区别【吕钒的后花园】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});</script><script>var isPassword=!1;isPassword&&""!==prompt("请输入文章密码")&&(alert("密码错误！"),history.back())</script><script>window.GLOBAL_CONFIG={root:"/",algolia:{appId:"DDS7QLTFBR",apiKey:"4e05b9f66dc7fb2160aef36bd87ecc5a",indexName:"lvfan",hits:{per_page:10},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容:${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},gitment:{},valine:{appId:"KX571rEzW5nRLWCfqRYsW1Cu-9Nh9j0Va",appKey:"Ost4nmwAxqVOb8hXC5UETzUu",placeholder:"快来评论吧～～",avatar:"wavatar",requiredFields:["nick","mail"],emojiCDN:"//i0.hdslb.com/bfs/emote/",emojiMaps:{"tv_白眼":"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png@112w_112h.webp",tv_doge:"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png@112w_112h.webp","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png@112w_112h.webp","tv_难过":"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png@112w_112h.webp","tv_生气":"26702dcafdab5e8225b43ffd23c94ac1ff932654.png@112w_112h.webp","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png@112w_112h.webp","tv_斜眼笑":"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png@112w_112h.webp","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png@112w_112h.webp","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png@112w_112h.webp","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png@112w_112h.webp","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png@112w_112h.webp","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png@112w_112h.webp","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png@112w_112h.webp","tv_疑问":"0793d949b18d7be716078349c202c15ff166f314.png@112w_112h.webp","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png@112w_112h.webp","tv_鼓掌":"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png@112w_112h.webp","tv_抠鼻":"c666f55e88d471e51bbd9fab9bb308110824a6eb.png@112w_112h.webp","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png@112w_112h.webp","tv_调皮":"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png@112w_112h.webp","tv_笑哭":"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png@112w_112h.webp","tv_晕":"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png@112w_112h.webp","tv_点赞":"f85c354995bd99e28fc76c869bfe42ba6438eff4.png@112w_112h.webp","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png@112w_112h.webp","tv_睡着":"8b196675b53af58264f383c50ad0945048290b33.png@112w_112h.webp","tv_色":"61822c7e9aae5da76475e7892534545336b23a6f.png@112w_112h.webp","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png@112w_112h.webp","tv_无奈":"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png@112w_112h.webp","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png@112w_112h.webp","tv_流汗":"cead1c351ab8d79e9f369605beb90148db0fbed3.png@112w_112h.webp","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png@112w_112h.webp","tv_抓狂":"fe31c08edad661d63762b04e17b8d5ae3c71a757.png@112w_112h.webp","tv_黑人问号":"45821a01f51bc867da9edbaa2e070410819a95b2.png@112w_112h.webp","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png@112w_112h.webp","tv_打脸":"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png@112w_112h.webp","tv_闭嘴":"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png@112w_112h.webp","tv_鄙视":"6e72339f346a692a495b123174b49e4e8e781303.png@112w_112h.webp","tv_腼腆":"89712c0d4af73e67f89e35cbc518420380a7f6f4.png@112w_112h.webp","tv_馋":"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png@112w_112h.webp","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png@112w_112h.webp","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png@112w_112h.webp","tv_生病":"8b0ec90e6b86771092a498c54f09fc94621c1900.png@112w_112h.webp","tv_流鼻血":"c32d39db2737f89b904ca32700d140a9241b0767.png@112w_112h.webp","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png@112w_112h.webp","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png@112w_112h.webp","tv_流泪":"7e71cde7858f0cd50d74b0264aa26db612a8a167.png@112w_112h.webp","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png@112w_112h.webp","tv_皱眉":"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png@112w_112h.webp","tv_鬼脸":"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png@112w_112h.webp","tv_调侃":"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png@112w_112h.webp","tv_目瞪口呆":"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png@112w_112h.webp"}}}</script><meta name="generator" content="Hexo 6.0.0"></head><body><canvas id="universe"></canvas><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.</span> <span class="toc-text">创建对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="toc-number">2.</span> <span class="toc-text">创建数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%95%B0%E7%BB%84%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">3.</span> <span class="toc-text">对象与数组的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E7%BB%84"><span class="toc-number">4.</span> <span class="toc-text">什么是数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#obj-2-%E4%B8%8E-arr-2-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.1.</span> <span class="toc-text">obj[2]与 arr[2]的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#obj-length-%E4%B8%8E-arr-length-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.2.</span> <span class="toc-text">obj.length 与 arr.length 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-arr-length-%E8%BE%93%E5%87%BA-3%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF-1-%E5%91%A2%EF%BC%9F"><span class="toc-number">4.3.</span> <span class="toc-text">为什么 arr.length 输出 3，而不是 1 呢？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%AA%E6%95%B0%E7%BB%84"><span class="toc-number">5.</span> <span class="toc-text">伪数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%EF%BC%9A"><span class="toc-number">5.1.</span> <span class="toc-text">定义：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">吕钒</div><div class="author-info-description">心之所向 素履以往 生如逆旅 一苇以航</div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/fan-lv" target="_blank">GitHub<i class="icon-dot bg-color3"></i></a><a class="links-button button-hover" href="mailto:15757856604@163.com" target="_blank">E-Mail<i class="icon-dot bg-color5"></i></a><a class="links-button button-hover" href="tencent://message/?uin=1019593584&amp;Site=&amp;Menu=yes" target="_blank">QQ<i class="icon-dot bg-color9"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">55</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">31</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">18</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i> <span>搜索</span></a><a class="title-name" href="/">吕钒的后花园</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">JavaScript中的数组与伪数组的区别</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2018-06-11 | 更新于 2020-07-16</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99/">前端资料</a><i class="fa fa-angle-right" style="margin:0 8px"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99/JavaScript/">JavaScript</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/JavaScript/">JavaScript</a></div></div></div><div class="main-content"><p>在 JavaScript 中，除了 5 种原始数据类型之外，其他所有的都是对象，包括函数（Function）。</p><blockquote><p>基本数据类型：String,boolean,Number,Undefined, Null<br>引用数据类型：Object(Array,Date,RegExp,Function)</p></blockquote><span id="more"></span><h2 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;; <span class="comment">// 这种方式创建对象，被称之为对象直接量（Object Literal）</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>(); <span class="comment">// 创建一个空对象，和&#123;&#125;一样</span></span><br><span class="line"><span class="comment">// 更多创建对象的知识，参见《JavaScript权威指南（第6版）》第6章</span></span><br></pre></td></tr></table></figure><h2 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = []; <span class="comment">// 这是使用数组直接量（Array Literal）创建数组</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(); <span class="comment">// 构造函数Array() 创建数组对象</span></span><br></pre></td></tr></table></figure><pre><code>更多创建数组的知识，参见《JavaScript 权威指南（第 6 版）》第 7 章。</code></pre><h2 id="对象与数组的关系"><a href="#对象与数组的关系" class="headerlink" title="对象与数组的关系"></a>对象与数组的关系</h2><p>在说区别之前，需要先提到另外一个知识，就是 JavaScript 的原型继承。所有 JavaScript 的内置构造函数都是继承自 Object.prototype。在这个前提下，可以理解为使用 new Array() 或 [] 创建出来的数组对象，都会拥有 Object.prototype 的属性值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;; <span class="comment">// 拥有Object.prototype的属性值</span></span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="comment">// 使用数组直接量创建的数组，由于Array.prototype的属性继承自 Object.prototype，</span></span><br><span class="line"><span class="comment">// 那么，它将同时拥有Array.prototype和Object.prototype的属性值</span></span><br></pre></td></tr></table></figure><pre><code>可以得到对象和数组的第一个区别：对象没有数组 Array.prototype 的属性值</code></pre><h2 id="什么是数组"><a href="#什么是数组" class="headerlink" title="什么是数组"></a>什么是数组</h2><p>数组具有一个最基本特征：索引，这是对象所没有的，下面来看一段代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">obj[<span class="number">2</span>] = <span class="string">&quot;a&quot;</span>;</span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="number">2</span>]); <span class="comment">// 输出 a</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">2</span>]); <span class="comment">// 输出 a</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">length</span>); <span class="comment">// 输出 undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">length</span>); <span class="comment">// 输出 3</span></span><br></pre></td></tr></table></figure><pre><code>通过上面这个测试，可以看到，虽然 obj[2]与 arr[2] 都输出&apos;a&apos;，但是，在输出 length 上有明显的差异，这是为什么呢？</code></pre><h3 id="obj-2-与-arr-2-的区别"><a href="#obj-2-与-arr-2-的区别" class="headerlink" title="obj[2]与 arr[2]的区别"></a>obj[2]与 arr[2]的区别</h3><p>obj[2]输出’a’，是因为对象就是普通的键值对存取数据<br>而 arr[2]输出’a’ 则不同，数组是通过索引来存取数据，arr[2]之所以输出’a’，是因为数组 arr 索引 2 的位置已经存储了数据</p><h3 id="obj-length-与-arr-length-的区别"><a href="#obj-length-与-arr-length-的区别" class="headerlink" title="obj.length 与 arr.length 的区别"></a>obj.length 与 arr.length 的区别</h3><p>obj.length 并不具有数组的特性，并且 obj 没有保存属性 length，那么自然就会输出 undefined<br>而对于数组来说，length 是数组的一个内置属性，数组会根据索引长度来更改 length 的值。</p><h3 id="为什么-arr-length-输出-3，而不是-1-呢？"><a href="#为什么-arr-length-输出-3，而不是-1-呢？" class="headerlink" title="为什么 arr.length 输出 3，而不是 1 呢？"></a>为什么 arr.length 输出 3，而不是 1 呢？</h3><p>这是由于数组的特殊实现机制，对于普通的数组，如果它的索引是从 0 开始连续的，那么 length 的值就会等于数组中元素个数<br>而对于上面例子中 arr，在给数组添加元素时，并没有按照连续的索引添加，所以导致数组的索引不连续，那么就导致索引长度大于元素个数，那么我们称之为稀疏数组。</p><blockquote><p>有关稀疏数组的特性参见《JavaScript 权威指南（第 6 版）》7.3 节。</p></blockquote><h2 id="伪数组"><a href="#伪数组" class="headerlink" title="伪数组"></a>伪数组</h2><h3 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h3><ul><li>拥有 length 属性，其它属性（索引）为非负整数(对象中的索引会被当做字符串来处理，这里你可以当做是个非负整数串来理解)</li><li>不具有数组所具有的方法</li></ul><p>伪数组，就是像数组一样有 length 属性，也有 0、1、2、3 等属性的对象，看起来就像数组一样，但不是数组，比如</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fakeArray = &#123;</span><br><span class="line">  <span class="attr">length</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">&quot;0&quot;</span>: <span class="string">&quot;first&quot;</span>,</span><br><span class="line">  <span class="string">&quot;1&quot;</span>: <span class="string">&quot;second&quot;</span>,</span><br><span class="line">  <span class="string">&quot;2&quot;</span>: <span class="string">&quot;third&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; fakeArray.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(fakeArray[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">join</span>.<span class="title function_">call</span>(fakeArray, <span class="string">&quot;+&quot;</span>);</span><br></pre></td></tr></table></figure><p>常见的参数的参数 arguments，DOM 对象列表（比如通过 document.getElementsByTags 得到的列表），jQuery 对象（比如 $(“div”)）。</p><p>伪数组是一个 Object，而真实的数组是一个 Array</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fakeArray <span class="keyword">instanceof</span> <span class="title class_">Array</span> === <span class="literal">false</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(fakeArray) === <span class="string">&quot;[object Object]&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>];</span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="title class_">Array</span> === <span class="literal">true</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(arr) === <span class="string">&quot;[object Array]&quot;</span>;</span><br></pre></td></tr></table></figure><p>《javascript 权威指南》上给出了代码用来判断一个对象是否属于“类数组”。如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Determine if o is an array-like object.</span></span><br><span class="line"><span class="comment">// Strings and functions have numeric length properties, but are</span></span><br><span class="line"><span class="comment">// excluded by the typeof test. In client-side JavaScript, DOM text</span></span><br><span class="line"><span class="comment">// nodes have a numeric length property, and may need to be excluded</span></span><br><span class="line"><span class="comment">// with an additional o.nodeType != 3 test.</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isArrayLike</span>(<span class="params">o</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    o &amp;&amp; <span class="comment">// o is not null, undefined, etc.</span></span><br><span class="line">    <span class="keyword">typeof</span> o === <span class="string">&quot;object&quot;</span> &amp;&amp; <span class="comment">// o is an object</span></span><br><span class="line">    <span class="built_in">isFinite</span>(o.<span class="property">length</span>) &amp;&amp; <span class="comment">// o.length is a finite number</span></span><br><span class="line">    o.<span class="property">length</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="comment">// o.length is non-negative</span></span><br><span class="line">    o.<span class="property">length</span> === <span class="title class_">Math</span>.<span class="title function_">floor</span>(o.<span class="property">length</span>) &amp;&amp; <span class="comment">// o.length is an integer</span></span><br><span class="line">    o.<span class="property">length</span> &lt; <span class="number">4294967296</span></span><br><span class="line">  )</span><br><span class="line">    <span class="comment">// o.length &lt; 2^32</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="comment">// Then o is array-like</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// Otherwise it is not</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不过有个更简单的办法来判断，用 Array.isArray</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">isArray</span>(fakeArray) === <span class="literal">false</span>;</span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr) === <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>从外观上看伪数组，看不出来它与数组的区别，在 JavaScript 内置对象中常见的伪数组就是大名鼎鼎的 auguments：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="variable language_">arguments</span>); <span class="comment">// 输出object，它并不是一个数组</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>另外在 DOM 对象中，childNodes 也是伪数组</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">childNodes</span>); <span class="comment">// 输出 object除此之外，还有很多常用的伪数组，就不一一列举。</span></span><br></pre></td></tr></table></figure><p>伪数组存在的意义，是可以让普通的对象也能正常使用数组的很多算法，比如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">0</span>); <span class="comment">// 将arguments对象转换成一个真正的数组</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">forEach</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="keyword">function</span>(<span class="params">v</span>) &#123;</span><br><span class="line">  <span class="comment">// 循环arguments对象</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>除了使用 Array.prototype.slice.call(arguments)，你也可以简单的使用[].slice.call(arguments) 来代替。另外，你可以使用 bind 来简化该过程。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> unboundSlice = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>;</span><br><span class="line"><span class="keyword">var</span> slice = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">call</span>.<span class="title function_">bind</span>(unboundSlice);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">list</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">slice</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> list1 = <span class="title function_">list</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>将具有 length 属性的对象转换成数组对象，arguments 是每个函数在运行的时候自动获得的一个近似数组的对象（传入函数的参数从 0 开始按数字排列，而且有 length）。</p><p>比如当你 func(‘a’, ‘b’, ‘c’) 的时候，func 里面获得的 arguments[0] 是 ‘a’，arguments[1] 是 ‘b’，依次类推。但问题在于这个 arguments 对象其实并不是 Array，所以没有 slice 方法。Array.prototype.slice.call( )可以间接对其实现 slice 的效果，而且返回的结果是真正的 Array。</p><p>对于 IE9 以前的版本(DOM 实现基于 COM)，我们可以使用 makeArray 来实现。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 伪数组转化成数组</span></span><br><span class="line"><span class="keyword">var</span> makeArray = <span class="keyword">function</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj || obj.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 非伪类对象，直接返回最好</span></span><br><span class="line">  <span class="keyword">if</span> (!obj.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 针对IE8以前 DOM的COM实现</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> [].<span class="property">slice</span>.<span class="title function_">call</span>(obj);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>,</span><br><span class="line">      j = obj.<span class="property">length</span>,</span><br><span class="line">      res = [];</span><br><span class="line">    <span class="keyword">for</span> (; i &lt; j; i++) &#123;</span><br><span class="line">      res.<span class="title function_">push</span>(obj[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>更多关于伪数组的知识，参见《JavaScript 权威指南（第 6 版）》7.11 节。</p></blockquote><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>对象没有数组 Array.prototype 的属性值，类型是 Object，而数组类型是 Array；</li><li>数组是基于索引的实现，length 会自动更新，而对象是键值对；</li><li>使用对象可以创建伪数组，伪数组可以正常使用数组的大部分方法；</li></ul></div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者:</span> <span class="post-copyright-info"><a href="mailto:15757856604@163.com">吕钒</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接:</span> <span class="post-copyright-info"><a href="https://fan-lv.github.io/2018/06/11/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-JavaScript-JavaScript%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E4%B8%8E%E4%BC%AA%E6%95%B0%E7%BB%84%E7%9A%84%E5%8C%BA%E5%88%AB/">https://fan-lv.github.io/2018/06/11/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-JavaScript-JavaScript%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E4%B8%8E%E4%BC%AA%E6%95%B0%E7%BB%84%E7%9A%84%E5%8C%BA%E5%88%AB/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://fan-lv.github.io">吕钒的后花园</a>！</span></div></div><div class="post-copyright valine" id="comments-container"><script src="//unpkg.com/valine@1.4.14/dist/Valine.min.js"></script><script>let arr = location.href.split('/#more')[0].split('/');
let title = arr[arr.length - 1];
if (title === '') {
    title = arr[arr.length - 2];
}
var flag = false;
var gitFun = function () {
    try {
        var valineObj = window.GLOBAL_CONFIG.valine;
        new Valine({
            el: "#comments-container",
            ...valineObj
        });
        flag = true;
    } catch (e) {
        flag = false;
    }
}
var setIn = setInterval(() => {
    if (!flag) {
        gitFun();
    } else {
        clearInterval(setIn);
    }
}, 200);</script></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2018/06/11/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-%E5%85%B6%E4%BB%96-Markdown%E8%AF%AD%E6%B3%95/"><i class="fas fa-angle-left">&nbsp;</i><span>Markdown语法</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2018/06/11/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%96%99-JavaScript-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><span>正则表达式</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2023 By 吕钒</div></div></div></footer></div><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><script src="/js/thirdparty/velocity.min.js"></script><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><script src="/js/fan.js"></script><script src="/js/canvas_bg.js"></script><script src="/js/utils.js"></script><script src="/js/scroll.js"></script><script src="/js/sidebar.js"></script><script src="/js/copy.js"></script><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><div id="search-box"></div><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>